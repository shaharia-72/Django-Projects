{% extends 'base.html' %} {% load static %} {% load crispy_forms_tags %}
<!--main-->{%block title %}Car Detail{% endblock %} {% block content %}
<div class="container mt-5">
  <!-- Car Detail -->
  <div class="row mb-4">
    <div class="col-md-6">
      <div class="img-container">
        <img
          src="{{ car.car_image.url }}"
          class="img-fluid rounded shadow-sm fixed-size-img"
          alt="{{ car.car_title }}"
          style="max-height: 400px; object-fit: cover" />
      </div>
    </div>
    <div class="col-md-6">
      <h1 class="display-4"><strong>{{ car.car_title }}</strong></h1>
      <p class="lead">
        <strong>Description:</strong> {{ car.car_descriptions }}
      </p>
      <h4><strong>Price:</strong> ${{ car.car_price }}</h4>
      <h4><strong>Brand:</strong> {{ car.brand.brand_name }}</h4>
      <form
        method="post"
        action="{% url 'confirm_order' car.id %}"
        class="mt-4">
        {% csrf_token %}
        <button type="submit" class="btn btn-warning btn-lg">Buy Now</button>
      </form>
    </div>
  </div>

  <!-- Comment Form -->
  <div class="card mt-5">
    <div class="card-body">
      <h3>Add a Comment</h3>
      <form method="post">
        {% csrf_token %} {{ comment_form|crispy }}
        <button type="submit" class="btn btn-primary btn-lg mt-3">
          Add Comment
        </button>
      </form>
    </div>
  </div>

  <!-- Comments Section -->
  <div class="card mt-5">
    <div class="card-body">
      <h3>Comments</h3>
      <h6>Total Comments Found: {{ comments|length }}</h6>
    </div>
  </div>

  <div class="card mt-3">
    <div class="card-body">
      {% for comment in comments %}
      <div class="border-bottom mb-3 pb-2">
        <strong>Name:</strong> {{ comment.name }} <br />
        <strong>Email:</strong> {{ comment.email }} <br />
        <p>{{ comment.comment }}</p>
        <small class="text-muted">{{ comment.comment_add_time }}</small>
      </div>
      {% empty %}
      <p>No comments yet.</p>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
